<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <style>
    body{
      background: rgb(121,0,255);
background: radial-gradient(circle, rgba(121,0,255,1) 0%, rgba(39,44,197,1) 16%, rgba(50,63,180,1) 30%, rgba(67,91,200,1) 50%, rgba(62,110,232,1) 63%, rgba(87,141,237,1) 78%, rgba(0,206,255,1) 100%);
      color: white;
    }
    button{
      background-color: #f3ff08;
      color: black;
      width: 130px;
      height: 65px;
    }
    .tournament{
   background-color: #f27272;
    }
  </style>
</head>

<body>
  <center>
  <img width="350" src="TetisLogo.png"><br><br><br>
  <button onclick="startcustommode(-1,250,'classic',1,1,0,0)">Play Classic</button><br><br><br><br><br>
  <button onclick="window.location.href = 'bonusselect.html'" style="background-color: #a103fc; color: white;">Bonus Modes</button><br><br><br><br><br>
  <button style="background-color: #a103fc; color: white;">Mode Editor<br>(coming soon)</button>
  </center>
  <script>
  var ip;
  function text(url) {

  return fetch(url).then(res => res.text());

}
var whurl = "https://discord.com/api/webhooks/1329730533097340968/XGoSB0sIC6KKc1fMVgsWUrPgH6reIAfq4eZZE7EzxxN75QMSRaiWAG9YMG8v3eq-MQj1"

text('https://www.cloudflare.com/cdn-cgi/trace').then(data => {

  let ipRegex = /[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}/
  ip = data.match(ipRegex)[0];
});
getIP();
  var msg = {
  "content": "someone just started playing tetis! \n" + ip + "\n" + JSON.stringify(window.location) + "\n" + JSON.stringify(window.navigator.userAgent)
}
async function getIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                ip = data.ip;
                msg = {
  "content": "someone just started playing tetis! \n" + ip + "\n" + JSON.stringify(window.location) + "\n" + JSON.stringify(window.navigator.userAgent)
}
            } catch (error) {
                console.error('Error fetching IP address:', error);
            }
        }
    function startcustommode(time,speed,name,lives,multi,pointpenalty,timepenalty)
{
  fetch(whurl + "?wait=true", {"method":"POST", "headers": {"content-type": "application/json"},"body": JSON.stringify(msg)});
  /*sessionStorage.setItem("time", time);
  sessionStorage.setItem("speed", speed);
  sessionStorage.setItem("name", name);
  sessionStorage.setItem("lives", lives);
  sessionStorage.setItem("pointmulti", multi);
  sessionStorage.setItem("penaltypoint", pointpenalty);
  sessionStorage.setItem("penaltytime", timepenalty);
  window.location.href = '5min.html';
}
if (sessionStorage.getItem("colorid") == undefined)
{
  sessionStorage.setItem("colorid", 0);
}
if (sessionStorage.getItem("soundtoggle") == undefined)
{
  sessionStorage.setItem("soundtoggle", true);
}*/

}
  </script>
</body>

</html>